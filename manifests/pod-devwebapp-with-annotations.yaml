apiVersion: v1
kind: Pod
metadata:
  name: devwebapp-with-annotations
  labels:
    app: devwebapp-with-annotations
  annotations:
    vault.hashicorp.com/agent-inject: 'true'
    vault.hashicorp.com/role: 'wp'
    vault.hashicorp.com/agent-inject-secret-credentials.txt: 'secret/wp/db/config'
spec:
  serviceAccountName: wp
  containers:
    - name: app
      image: burtlo/devwebapp-ruby:k8s
      env:
        - name: VAULT_ADDR
          value: 'http://external-vault:8200'
        - name: VAULT_TOKEN
          value: root
